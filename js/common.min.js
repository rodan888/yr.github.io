$(function(){var a={btnMenu:$(".btn-menu"),btnSearch:$("#tags-search-button"),tagsContainer:$("#tags"),pinContainer:$(".pin-container"),nav:$(".menu-container nav"),loader:$(".loader-wrap"),slider:$("#carousel"),imgParallax:$(".parralax"),headerParallax:$("header.big-header"),popupBtn:$(".popup-btn"),popupContainer:$(".popup"),owlOptions:{autoPlay:3e3,navigation:!0,items:4,autoPlay:!1,pagination:!1,scrollPerPage:!0,navigationText:['<i class="fa fa-angle-left"></i>','<i class="fa fa-angle-right"></i>'],itemsDesktop:[1199,3],itemsDesktopSmall:[979,3]},masonryOptins:{columnWidth:".item",itemSelector:".item"},flag:!0,docHeight:"",winHeight:$(window).height(),footerHeight:$("footer").height(),headerHeight:$("header").height(),scroll:"",ajaxReturn:[],pagination:1,ajaxPinUrl:function(){return this.pinContainer.data("url")},toggleFunk:function(a,t,i){a.on("click",function(){$(this).toggleClass(i),t.slideToggle("slow")})},popup:function(a,t){this.popupBtn.on("click",function(i){i.preventDefault(),a.fadeIn("slow").css("height",t+"px").find("form").append('<span class="fade_out">&#9587;</span>'),$(".fade_out").click(function(){a.fadeOut("slow"),$(this).detach()})})},ajaxPin:function(){var a=this;$.ajax({url:a.ajaxPinUrl(),type:"GET",dataType:"json",data:a.pagination,beforeSend:function(){a.flag=!1,a.pagination++}}).done(function(t){for(var i=0;i<t.pinlist.length;i++)a.ajaxReturn.push('<div class="col-md-3 col-sm-4 item"> <div class="pin"> <div class="img-wrap"><div class="add-block"><a class="add-button" href="#">+ Добавить</a><a class="share" href="#"><i class="fa fa-share"></i></a><a class="like" href="#"><i class="fa fa-thumbs-up"></i></a></div><a href="'+t.pinlist[i].link+'"><img src="'+t.pinlist[i].img+'" alt="pin"></a></div><div class="descr"><h3><a href="'+t.pinlist[i].link+'">'+t.pinlist[i].title+"</a></h3><p>"+t.pinlist[i].descr+"</p></div></div></div>");a.pinContainer.append(a.ajaxReturn).masonry("reloadItems").masonry("layout"),a.flag=!0}).fail(function(){console.log("error")})},toggleInit:function(){this.toggleFunk(this.btnMenu,this.nav,"open-menu"),this.toggleFunk(this.btnSearch,this.tagsContainer,"open")},mouseParallax:function(){var a=$(window).width(),t=$("header").height(),i=this;this.headerParallax.mousemove(function(n){var e=n.pageX,o=n.pageY,e=e-Math.floor(a/2),o=o-Math.floor(t/2);i.imgParallax.css({"-webkit-transform":"translateY("+-e/20+"px) translateX("+-o/20+"px)",transform:"translateY("+-e/20+"px) translateX("+-o/20+"px)"})})},scrollEvent:function(){var a=this;$(window).on("scroll",function(){a.scroll=$(this).scrollTop(),a.docHeight=$(document).outerHeight(),a.scroll>a.headerHeight?a.btnMenu.addClass("purpure"):a.btnMenu.removeClass("purpure"),a.scroll>a.docHeight-a.winHeight-a.footerHeight?(a.loader.css("display","block"),a.flag&&a.ajaxPin()):a.loader.css("display","none")})},init:function(){this.toggleInit(),this.pinContainer.masonry(this.masonryOptins),this.slider.owlCarousel(this.owlOptions),this.scrollEvent(),this.popup(this.popupContainer,this.winHeight),this.mouseParallax()}};a.init(),$("img, a").on("dragstart",function(a){a.preventDefault()})});